<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>여행 AI 에이전트 - 모의 예약</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h1 { color: #2c3e50; }
.card { border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; }
button { background: #3498db; color: #fff; border: none; padding: 10px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
button:hover { background: #2980b9; }
textarea { width: 100%; height: 80px; margin: 10px 0; }
.option-card { border: 1px solid #ccc; padding: 10px; margin: 5px 0; border-radius: 5px; cursor: pointer; }
.option-card:hover { background: #f0f0f0; }
</style>
</head>
<body>

<h1>✈️ 여행 전문 AI 에이전트</h1>
<p>자연어로 여행 요청을 입력하세요 (예: "인천에서 도쿄 2박3일 최저가 항공권과 호텔 찾아줘").</p>

<div class="card">
  <textarea id="user-request" placeholder="여행 요청을 입력하세요..."></textarea><br>
  <button onclick="searchCandidates()">검색</button>
</div>

<div id="results"></div>
<div id="checkout"></div>

<script>
// 자연어에서 여행 정보 추출 (간단 mock, 실제는 LLM 사용 가능)
function parseRequest(text) {
  const originMatch = text.match(/인천|서울|김포|부산|제주/);
  const destinationMatch = text.match(/도쿄|오사카|뉴욕|파리|런던/);
  const nightsMatch = text.match(/(\d)박/);
  const daysMatch = text.match(/(\d)일/);

  return {
    origin: originMatch ? originMatch[0] : "인천",
    destination: destinationMatch ? destinationMatch[0] : "도쿄",
    nights: nightsMatch ? parseInt(nightsMatch[1]) : 2,
    days: daysMatch ? parseInt(daysMatch[1]) : 3,
    departDate: "2025-10-01",
    returnDate: "2025-10-03"
  };
}

// 모의 검색
function searchCandidates() {
  const text = document.getElementById("user-request").value;
  const query = parseRequest(text);
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = `<p>검색 요청: ${query.origin} → ${query.destination}, ${query.nights}박 ${query.days}일</p><h3>추천 옵션</h3>`;

  // mock 항공/호텔 후보
  const options = [
    { type: "최저가", airline: "아시아나", price: 350000, duration: "2시간20분", stops: 0, hotel: {name:"도쿄 캡슐호텔", price:70000, rating:"⭐3.5"} },
    { type: "최단시간", airline: "대한항공", price: 420000, duration: "2시간05분", stops: 0, hotel: {name:"신주쿠 비즈니스 호텔", price:90000, rating:"⭐4.0"} },
    { type: "최소리스크", airline: "ANA", price: 480000, duration: "2시간30분", stops: 0, hotel: {name:"도쿄 시티 호텔", price:130000, rating:"⭐4.7"} }
  ];

  options.forEach((opt, idx) => {
    const div = document.createElement("div");
    div.className = "option-card";
    div.innerHTML = `
      <strong>[${opt.type}]</strong> ✈ ${opt.airline} | ${opt.duration} | ₩${opt.price.toLocaleString()} | 환승 ${opt.stops}회 <br>
      🏨 ${opt.hotel.name} | ₩${opt.hotel.price.toLocaleString()} / 박 | ${opt.hotel.rating}
    `;
    div.onclick = () => selectOption(opt);
    resultsDiv.appendChild(div);
  });
}

// 옵션 선택 시 모의 결제 화면 표시
function selectOption(option) {
  const checkoutDiv = document.getElementById("checkout");
  checkoutDiv.innerHTML = `
    <div class="card">
      <h3>🛒 결제 전 확인</h3>
      <p><strong>항공편:</strong> ${option.airline} | ${option.duration} | ₩${option.price.toLocaleString()} | 환승 ${option.stops}회</p>
      <p><strong>호텔:</strong> ${option.hotel.name} | ₩${option.hotel.price.toLocaleString()} / 박 | ${option.hotel.rating}</p>
      <p><strong>총 예상 비용:</strong> ₩${(option.price + option.hotel.price * 2).toLocaleString()}</p>
      <button onclick="alert('모의 결제 완료! 실제 결제는 이루어지지 않습니다.')">모의 결제 진행</button>
    </div>
  `;
}
</script>
</body>
</html>
