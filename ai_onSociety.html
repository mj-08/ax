<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì—¬í–‰ AI ì—ì´ì „íŠ¸ - ì˜ˆì•½2</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h1 { color: #2c3e50; }
.card { border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; }
button { background: #3498db; color: #fff; border: none; padding: 10px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
button:hover { background: #2980b9; }
textarea, input { width: 100%; margin: 10px 0; padding: 8px; }
.option-card { border: 1px solid #ccc; padding: 10px; margin: 5px 0; border-radius: 5px; cursor: pointer; transition: 0.2s; }
.option-card:hover { background: #f0f0f0; transform: scale(1.01); }
.results-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
@media (min-width: 600px) {
  .results-grid { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<h1>âœˆï¸ ì—¬í–‰ ì „ë¬¸ AI ì—ì´ì „íŠ¸</h1>
<p>ìì—°ì–´ë¡œ ì—¬í–‰ ìš”ì²­ì„ ì…ë ¥í•˜ê±°ë‚˜ ì§ì ‘ ì„ íƒí•˜ì„¸ìš”.</p>

<div class="card">
  <textarea id="user-request" placeholder="ì˜ˆ: ì¸ì²œì—ì„œ ë„ì¿„ 2ë°•3ì¼ ìµœì €ê°€ í•­ê³µê¶Œê³¼ í˜¸í…” ì°¾ì•„ì¤˜"></textarea>
  
  <label>ì¶œë°œì¼: <input type="date" id="depart-date"></label>
  <label>ê·€êµ­ì¼: <input type="date" id="return-date"></label>
  
  <button onclick="searchCandidates()">ê²€ìƒ‰</button>
</div>

<div id="results"></div>
<div id="checkout"></div>

<script>
// ìš”ì²­ íŒŒì‹±
function parseRequest(text) {
  const originMatch = text.match(/ì¸ì²œ|ì„œìš¸|ê¹€í¬|ë¶€ì‚°|ì œì£¼/);
  const destinationMatch = text.match(/ë„ì¿„|ì˜¤ì‚¬ì¹´|ë‰´ìš•|íŒŒë¦¬|ëŸ°ë˜/);
  const nightsMatch = text.match(/(\d)ë°•/);
  const daysMatch = text.match(/(\d)ì¼/);

  const departInput = document.getElementById("depart-date").value;
  const returnInput = document.getElementById("return-date").value;

  return {
    origin: originMatch ? originMatch[0] : "ì¸ì²œ",
    destination: destinationMatch ? destinationMatch[0] : "ë„ì¿„",
    nights: nightsMatch ? parseInt(nightsMatch[1]) : 2,
    days: daysMatch ? parseInt(daysMatch[1]) : 3,
    departDate: departInput || "2025-10-01",
    returnDate: returnInput || "2025-10-03"
  };
}

// ì‹¤ì œ API ì—°ë™ í•¨ìˆ˜ (ì˜ˆ: Skyscanner RapidAPI - mock êµ¬ì¡°)
async function fetchFlights(query) {
  // ì‹¤ì œ API ì—°ë™ ì‹œì—ëŠ” fetch()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”
   const res = await fetch("https://skyscanner-api-url", { headers: { "X-API-Key": "YOUR_KEY" } });
   return await res.json();

  // Mock ë°ì´í„°
  return [
    { type: "ìµœì €ê°€", airline: "ì•„ì‹œì•„ë‚˜", price: 350000, duration: "2ì‹œê°„20ë¶„", stops: 0, hotel: {name:"ë„ì¿„ ìº¡ìŠí˜¸í…”", price:70000, rating:"â­3.5"} },
    { type: "ìµœë‹¨ì‹œê°„", airline: "ëŒ€í•œí•­ê³µ", price: 420000, duration: "2ì‹œê°„05ë¶„", stops: 0, hotel: {name:"ì‹ ì£¼ì¿  ë¹„ì¦ˆë‹ˆìŠ¤ í˜¸í…”", price:90000, rating:"â­4.0"} },
    { type: "ìµœì†Œë¦¬ìŠ¤í¬", airline: "ANA", price: 480000, duration: "2ì‹œê°„30ë¶„", stops: 0, hotel: {name:"ë„ì¿„ ì‹œí‹° í˜¸í…”", price:130000, rating:"â­4.7"} }
  ];
}

// í›„ë³´ ê²€ìƒ‰
async function searchCandidates() {
  const text = document.getElementById("user-request").value;
  const query = parseRequest(text);

  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = `<p>ê²€ìƒ‰ ìš”ì²­: ${query.origin} â†’ ${query.destination}, ${query.nights}ë°• ${query.days}ì¼ (${query.departDate} ~ ${query.returnDate})</p><h3>ì¶”ì²œ ì˜µì…˜</h3>`;
  
  const options = await fetchFlights(query);

  const grid = document.createElement("div");
  grid.className = "results-grid";

  options.forEach((opt) => {
    const div = document.createElement("div");
    div.className = "option-card";
    div.innerHTML = `
      <strong>[${opt.type}]</strong> âœˆ ${opt.airline} | ${opt.duration} | â‚©${opt.price.toLocaleString()} | í™˜ìŠ¹ ${opt.stops}íšŒ <br>
      ğŸ¨ ${opt.hotel.name} | â‚©${opt.hotel.price.toLocaleString()} / ë°• | ${opt.hotel.rating}
    `;
    div.onclick = () => selectOption(opt, query);
    grid.appendChild(div);
  });

  resultsDiv.appendChild(grid);
}

// ê²°ì œ í™”ë©´
function selectOption(option, query) {
  const checkoutDiv = document.getElementById("checkout");
  const totalCost = option.price + option.hotel.price * query.nights;
  
  checkoutDiv.innerHTML = `
    <div class="card">
      <h3>ğŸ›’ ê²°ì œ ì „ í™•ì¸</h3>
      <p><strong>í•­ê³µí¸:</strong> ${option.airline} | ${option.duration} | â‚©${option.price.toLocaleString()} | í™˜ìŠ¹ ${option.stops}íšŒ</p>
      <p><strong>í˜¸í…”:</strong> ${option.hotel.name} | â‚©${option.hotel.price.toLocaleString()} / ë°• | ${option.hotel.rating}</p>
      <p><strong>ì´ ì˜ˆìƒ ë¹„ìš©:</strong> â‚©${totalCost.toLocaleString()}</p>
      <button onclick="alert('ëª¨ì˜ ê²°ì œ ì™„ë£Œ! ì‹¤ì œ ê²°ì œëŠ” ì´ë£¨ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.')">ëª¨ì˜ ê²°ì œ ì§„í–‰</button>
    </div>
  `;
}
</script>
</body>
</html>
